<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animatable-behavior.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../genemo-styles.html">
<link rel="import" href="../chart-area/chart-area.html">
<link href="http://fonts.googleapis.com/css?family=Roboto:500,400italic,700italic,700,400" rel="stylesheet" type="text/css">
<dom-module id="chart-card-content">
  <template>
    <style include="genemo-shared-styles">
		:host {
			display: block;
			padding: 1em;
		}
		
		chart-area {
			width: 100%;
			margin: 1em 0;
		}
		
		paper-input {
			width: 11em;
			margin: 0 0.5em;
		}
		
		paper-slider {
			width: 20em;
		}
		
		paper-slider[editable]::shadow #sliderContainer {
			margin: 0;
		}
		
		paper-slider[editable]::shadow paper-input-container {
			padding: 2px;
		}
		
		div.smallText {
			font-size: 10px;
			display: block;
		}
		
		.lineContainer {
			display: table;
			border-collapse: separate;
			border-spacing: 1em 0.4em;
		}
		
		.lineContainer > * {
			display: table-cell;
			vertical-align: middle;
		}
		
    </style>
    <paper-material z="1" class="lineContainer">
      <paper-input id="mainWindowCoor" label="Upper window coordinates" floatingLabel="true" value="{{mainCoor}}"></paper-input>
      <paper-input id="subWindowCoor" label="Lower window coordinates" floatingLabel="true" value="{{subCoor}}"></paper-input>
      <div>
        <div class="smallText">Threshold (# of reads / 40kb bin)</div>
        <paper-slider value="{{threshold}}" max="10" step="0.01" editable></paper-slider>
      </div>
      <div>
        <paper-button class="colored" raised id="updateChart">Update</paper-button>
      </div>
    </paper-material>
    <chart-area id="mainChart" view-window-string="{{mainCoor}}" sub-window-string="{{subCoor}}"></chart-area>
  </template>
  <script>
  	Polymer({
		is: "chart-card-content",
		
		behaviors: [
			Polymer.NeonAnimatableBehavior
		],
		
		properties: {
			mainCoor: {
				type: String
			},
			subCoor: {
				type: String,
			},
			threshold: {
				type: Number,
				value: 1.0
			}
		},
		
		updateSvg: function() {
			this.$.mainChart.drawDemo(this.mainCoor, [this.subCoor], this.threshold);
		},
		
		ready: function() {
            this.$.updateChart.addEventListener("click", this.updateSvg.bind(this));
		}
	});
  </script>
</dom-module>
